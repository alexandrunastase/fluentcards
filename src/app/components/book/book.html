<div class="book container-fluid" *ngIf="book">
  <div class="book__controls row">
    <div class="col-xs-2" *ngIf="book.cover">
      <img [src]="book.cover" alt="{{ book.title }} cover" />
    </div>

    <div class="col-xs-10">
      <h4 class="book__title">
        {{ book.title }}<br />
        <small>by <em>{{ book.authors }}</em></small>
      </h4>
    </div>
  </div>

  <div class="book__controls row">
    <div class="pull-left">
      <label>Choose your native language:&nbsp;
        <select [(ngModel)]="language">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="fr">Français</option>
          <option value="de">Deutsch</option>
          <option value="ru">Русский</option>
        </select>
      </label>

      <button class="btn btn-primary" (click)="addTranslations()" [disabled]="isTranslationLoading">
        <loader [isLoading]="isTranslationLoading"></loader> Add translations
      </button>
    </div>

    <div class="pull-left book__button">
      <button class="btn btn-primary" (click)="addCloze()" [disabled]="book.vocabs[0].cloze != null">
        Add cloze test
      </button>

      <a class="text-muted" href="http://ankisrs.net/docs/manual.html#cloze-deletion"><sup>What is a cloze test?</sup></a>
    </div>

    <div class="pull-right book__button">
      <button class="btn btn-success" (click)="exportCsv()">
        Export as CSV
      </button>
    </div>
  </div>

  <div class="text-muted">Powered by Yandex.Translate</div>

  <table class="book__table table table-inverse">
    <thead>
      <th>#</th>
      <th>Word</th>
      <th *ngIf="book.vocabs[0].translation != null">Translation</th>
      <th>Sentence</th>
      <th *ngIf="book.vocabs[0].cloze != null">Cloze</th>
    </thead>

    <tbody>
      <tr *ngFor="let vocab of book.vocabs; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ vocab[0] }}</td>
        <td *ngIf="vocab.translation != null">{{ vocab.translation }}</td>
        <td>{{ vocab[2] }}</td>
        <td *ngIf="vocab.cloze != null">{{ vocab.cloze }}</td>
      </tr>
    </tbody>
  </table>
</div>
